/* Mobile and PWA Optimizations */

/* iOS-specific tap highlight removal */
* {
	-webkit-tap-highlight-color: transparent;
	-webkit-touch-callout: none;
}

/* Prevent text selection on buttons and interactive elements */
button,
.ghost-container,
.record-button,
.modal-close-button {
	-webkit-user-select: none;
	-moz-user-select: none;
	-ms-user-select: none;
	user-select: none;
	touch-action: manipulation; /* Faster touch response */
}

/* Allow text selection only in transcript areas */
.transcript-text,
.transcript-display {
	-webkit-user-select: text;
	-moz-user-select: text;
	-ms-user-select: text;
	user-select: text;
}

/* iOS safe area insets for notched devices */
.main-container {
	padding-top: env(safe-area-inset-top);
	padding-bottom: env(safe-area-inset-bottom);
	padding-left: env(safe-area-inset-left);
	padding-right: env(safe-area-inset-right);
}

/* Footer adjustments for iOS home indicator */
.footer-component {
	padding-bottom: max(1rem, env(safe-area-inset-bottom));
}

/* Prevent rubber-band scrolling on iOS while allowing scroll */
html {
	width: 100%;
	height: 100%;
	overflow: hidden;
}

body {
	width: 100%;
	height: 100%;
	overflow: auto;
	-webkit-overflow-scrolling: touch; /* Momentum scrolling */
	overscroll-behavior: contain; /* Prevent pull-to-refresh */
}

#app,
.app-container {
	width: 100%;
	min-height: 100%;
	overflow-y: visible; /* Allow content to flow naturally */
}

/* Prevent zoom on input focus (iOS) */
input,
textarea,
select {
	font-size: 16px !important; /* Prevents zoom on iOS */
}

/* Optimize animations for mobile */
@media (hover: none) and (pointer: coarse) {
	/* Reduce animation complexity on touch devices */
	.ghost-container {
		will-change: auto; /* Only when animating */
	}

	/* Simplify hover effects for touch */
	.ghost-container:hover {
		animation: none;
	}

	/* Larger touch targets */
	button,
	.clickable {
		min-height: 44px; /* iOS HIG recommendation */
		min-width: 44px;
	}
}

/* PWA standalone mode adjustments */
@media (display-mode: standalone) {
	/* Hide browser-specific UI elements */
	.browser-only {
		display: none;
	}

	/* Adjust for missing browser chrome */
	.main-container {
		height: 100vh;
		height: -webkit-fill-available; /* iOS fix */
	}
}

/* Landscape orientation optimizations */
@media (orientation: landscape) and (max-height: 500px) {
	/* Reduce vertical spacing in landscape */
	.ghost-container {
		max-height: 40vh;
	}

	.button-section {
		padding-top: 0.5rem;
		padding-bottom: 0.5rem;
	}

	/* Hide footer in landscape on small screens */
	.footer-component {
		display: none;
	}
}

/* High contrast mode support */
@media (prefers-contrast: high) {
	.ghost-container {
		border: 2px solid currentColor;
	}

	button {
		border: 2px solid currentColor;
	}
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
	*,
	*::before,
	*::after {
		animation-duration: 0.01ms !important;
		animation-iteration-count: 1 !important;
		transition-duration: 0.01ms !important;
		scroll-behavior: auto !important;
	}
}

/* iOS status bar in PWA mode */
@supports (padding-top: env(safe-area-inset-top)) {
	.status-bar-spacer {
		height: env(safe-area-inset-top);
		background: var(--theme-background, #fff6e6);
	}
}

/* Pull-to-refresh prevention handled above in body styles */

/* Optimize font rendering on mobile */
body {
	-webkit-font-smoothing: antialiased;
	-moz-osx-font-smoothing: grayscale;
	text-rendering: optimizeLegibility;
}

/* Disable user scaling but maintain accessibility */
@viewport {
	width: device-width;
	initial-scale: 1;
	maximum-scale: 1;
	user-scalable: no;
}
